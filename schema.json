{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "LED Panel Layout",
  "type": "object",
  "properties": {
    "version": {
      "type": "number",
      "description": "Schema version number (e.g., 1.0, 1.1, 2.0)"
    },
    "resources": {
      "type": "object",
      "description": "Named inline resources (e.g., icons) that can be referenced in text with {name}",
      "additionalProperties": { "type": "string" }
    },
    "objects": {
      "type": "array",
      "items": {
        "oneOf": [
          {
            "type": "object",
            "required": ["type", "x", "y", "width", "height"],
            "properties": {
              "type": {
                "type": "string",
                "enum": ["Image", "Textbox", "ScrollingTextbox", "Alert"]
              },
              "x": { "type": "integer", "minimum": 0 },
              "y": { "type": "integer", "minimum": 0 },
              "width": { "type": "integer", "minimum": 1 },
              "height": { "type": "integer", "minimum": 1 },

              "path": {
                "type": "string",
                "description": "For Image objects: local path or URL"
              },

              "text": {
                "type": "string",
                "description": "Text content, may include inline tokens like {uparrow}, {api:weather}, {var:username}"
              },
              "dataSource": {
                "type": "string",
                "description": "Internal API name (e.g., 'weather', 'stocks'). If set, overrides text."
              },
              "dataParams": {
                "type": "object",
                "description": "Parameters for the data source (e.g., {\"location\": \"London\"})"
              },
              "fgColor": { "type": "string" },
              "bgColor": { "type": "string" },
              "font": { "type": "string" },
              "scrollSpeed": {
                "type": "integer",
                "minimum": 1,
                "description": "For ScrollingTextbox only"
              }
            }
          },
          {
            "type": "object",
            "required": ["type", "x", "y", "width", "height", "objects"],
            "properties": {
              "type": { "const": "Group" },
              "x": { "type": "integer" },
              "y": { "type": "integer" },
              "width": { "type": "integer" },
              "height": { "type": "integer" },
              "objects": {
                "type": "array",
                "items": { "$ref": "#" }
              }
            }
          }
        ]
      }
    }
  },
  "required": ["version", "objects"]
}